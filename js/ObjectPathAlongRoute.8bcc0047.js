(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ObjectPathAlongRoute"],{"2b2e":function(e,t,o){},"3bc2":function(e,t,o){"use strict";o.r(t);var a=o("7a23"),n=Object(a["C"])("data-v-10458e1c");Object(a["s"])("data-v-10458e1c");var r=Object(a["g"])("div",{id:"map"},null,-1),i=Object(a["g"])("div",{class:"overlay"},[Object(a["g"])("button",{id:"replay"},"Replay")],-1);Object(a["q"])();var s=n((function(e,t,o,n,s,c){return Object(a["p"])(),Object(a["d"])(a["a"],null,[r,i],64)})),c=(o("d81d"),o("595b")),p=o("07a4"),u={name:"ObjectPathAlongRoute",data:function(){return{style:"mapbox://styles/mapbox/streets-v11"}},computed:{map:function(){return p["a"].getters.createMap("map",0,0,1.5,[-40.6861245,59.2268129],this.style,1,!0)}},mounted:function(){p["a"].getters.pageReload();for(var e=this.map,t=p["a"].state.mapboxgl,o=[37.4103143,55.9736512],a=[-118.40511299589207,33.944011419272634],n={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:[o,a]}}]},r={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:o}}]},i=c["length"](n.features[0]),s=[],u=500,d=0;d<i;d+=i/u){var l=c["along"](n.features[0],d);s.push(l.geometry.coordinates)}n.features[0].geometry.coordinates=s;var g=0;e.on("load",(function(){function a(){var t=n.features[0].geometry.coordinates[g>=u?g-1:g],o=n.features[0].geometry.coordinates[g>=u?g:g+1];t&&o&&(r.features[0].geometry.coordinates=n.features[0].geometry.coordinates[g],r.features[0].properties.bearing=c["bearing"](c["point"](t),c["point"](o)),e.getSource("point").setData(r),g<u&&requestAnimationFrame(a),g+=1)}e.addSource("route",{type:"geojson",data:n}),e.addSource("point",{type:"geojson",data:r}),e.addSource("airports",{type:"geojson",data:"https://raw.githubusercontent.com/KonstantinBiryukov/KonstantinBiryukov.github.io/master/storytellingmaps-geojson/LAXMoscow.geojson"}),e.addLayer({id:"route",source:"route",type:"line",paint:{"line-width":2,"line-color":"#007cbf"}}),e.addLayer({id:"point",source:"point",type:"symbol",layout:{"icon-image":"airfield-15","icon-rotate":["get","bearing"],"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0}}),e.addLayer({id:"airports",type:"symbol",source:"airports",layout:{"icon-image":"airfield-15","text-field":["format",["upcase",["get","FacilityName"]],{"font-scale":1.15},"\n",{},["upcase",["get","Comments"]],{"font-scale":.75}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,.8],"text-anchor":"top"}}),document.getElementById("replay").addEventListener("click",(function(){r.features[0].geometry.coordinates=o,e.getSource("point").setData(r),g=0,a(g)})),a(g),new t.Popup({closeOnClick:!1,anchor:"center"}).setLngLat([-159.1437881976649,66.13508298542861]).setHTML('<div id="alongRoute-helper" class="popup-helper">A point is animated along the route.<br>Push "Replay" button to repeat the plane\'s animation.</div>').addTo(e)}))}};o("5c8e");u.render=s,u.__scopeId="data-v-10458e1c";t["default"]=u},"5c8e":function(e,t,o){"use strict";o("2b2e")}}]);
//# sourceMappingURL=ObjectPathAlongRoute.8bcc0047.js.map