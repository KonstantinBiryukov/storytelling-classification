{"version":3,"sources":["webpack:///./src/views/ChangesOverTime.vue","webpack:///./src/views/ChangesOverTime.vue?06d9","webpack:///./src/views/ChangesOverTime.vue?847e","webpack:///./node_modules/core-js/internals/create-property.js","webpack:///./src/views/ChangesOverTime.vue?7bfc","webpack:///./node_modules/core-js/modules/es.array.slice.js"],"names":["class","name","data","style","computed","map","store","getters","createMap","this","mounted","pageReload","mapboxgl","state","addControl","NavigationControl","months","filterBy","month","filters","setFilter","document","getElementById","textContent","on","d3","err","features","d","properties","Date","time","getMonth","addSource","addLayer","e","coordinates","geometry","slice","link","url","description","title","Math","abs","lngLat","lng","Popup","setLngLat","setHTML","addTo","addEventListener","parseInt","target","value","closeOnClick","anchor","render","__scopeId","toPrimitive","definePropertyModule","createPropertyDescriptor","module","exports","object","key","propertyKey","f","$","isObject","isArray","toAbsoluteIndex","toLength","toIndexedObject","createProperty","wellKnownSymbol","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","SPECIES","nativeSlice","max","proto","forced","start","end","Constructor","result","n","O","length","k","fin","undefined","constructor","Array","prototype","call"],"mappings":"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","file":"js/ChangeOverTime.bc32c79e.js","sourcesContent":["<template>\n  <div class=\"change-over-time-container\">\n    <div id=\"map\"></div>\n\n    <div class=\"map-overlay top\">\n      <div class=\"map-overlay-inner\">\n        <h2>Significant earthquakes in 2021</h2>\n        <label id=\"month\"></label>\n        <input id=\"slider\" type=\"range\" min=\"0\" max=\"11\" step=\"1\" value=\"0\"/>\n      </div>\n      <div class=\"map-overlay-inner\">\n        <div id=\"legend\" class=\"legend\">\n          <div class=\"bar\"></div>\n          <div>Magnitude (m).\n            <div class=\"magnitude-description\">Minimal magnitude is 6. [Richter magnitude scale]</div>\n            <div class=\"magnitude-description\">Data source: <a href=\"https://earthquake.usgs.gov/\" target=\"_blank\">https://earthquake.usgs.gov/</a>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"map-overlay-inner\">\n        Top 5 earthquakes by magnitude in <span id=\"year-2020\">2020</span>:\n        <table class=\"top-earthquakes-table\">\n          <tr>\n            <th>Rank</th>\n            <th>Magnitude</th>\n            <th>Death toll</th>\n            <th>Location</th>\n            <th>Date</th>\n          </tr>\n          <tr>\n            <td>1</td>\n            <td>7.8</td>\n            <td>0</td>\n            <td>United States, Alaska offshore</td>\n            <td>July 22</td>\n          </tr>\n          <tr>\n            <td>2</td>\n            <td>7.7</td>\n            <td>0</td>\n            <td>Jamaica, Hanover offshore</td>\n            <td>January 28</td>\n          </tr>\n          <tr>\n            <td>3</td>\n            <td>7.6</td>\n            <td>0</td>\n            <td>United States, Alaska offshore</td>\n            <td>October 19</td>\n          </tr>\n          <tr>\n            <td>4</td>\n            <td>7.5</td>\n            <td>0</td>\n            <td>Russia, Kuril Islands offshore</td>\n            <td>March 25</td>\n          </tr>\n          <tr>\n            <td>5</td>\n            <td>7.4</td>\n            <td>10</td>\n            <td>Mexico, Oaxaca</td>\n            <td>June 23</td>\n          </tr>\n        </table>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport * as d3 from 'd3';\nimport store from \"@/store/store\";\n\nexport default {\n  name: \"ChangeOverTime\",\n  data: function () {\n    return {\n      style: \"mapbox://styles/mapbox/light-v10\",\n      // image: image\n    }\n  },\n  computed: {\n    map() {\n      return store.getters.createMap(\"map\", 0, 0, 0.5,\n          [31.4606, 20.7927], this.style, 0.5, true\n      );\n    }\n  },\n  mounted() {\n    store.getters.pageReload();\n    let map = this.map;\n    let mapboxgl = store.state.mapboxgl;\n    map.addControl(new mapboxgl.NavigationControl());\n    const months = [\n      'January',\n      'February',\n      'March',\n      'April',\n      'May',\n      'June',\n      'July',\n      'August',\n      'September',\n      'October',\n      'November',\n      'December'\n    ];\n\n    function filterBy(month) {\n      let filters = ['==', 'month', month];\n      map.setFilter('earthquake-circles', filters);\n      map.setFilter('earthquake-labels', filters);\n\n      // Set the label to the month\n      document.getElementById('month').textContent = months[month];\n    }\n\n    map.on('load', function () {\n      // Data: http://earthquake.usgs.gov/\n      // Query for significant earthquakes in 2020 : (geojson with start- and end-time, and minmagnitude)\n      // http://earthquake.usgs.gov/fdsnws/event/1/query\n      //    ?format=geojson\n      //    &starttime=2020-01-01\n      //    &endtime=2020-12-31\n      //    &minmagnitude=6'\n\n      // d3.js library is used to help making the ajax request\n      d3.json(\n          'https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson&starttime=2021-01-01&endtime=2021-12-31&minmagnitude=6',\n          function (err, data) {\n            if (err) throw err;\n\n            // Create a month property value based on time used for filter.\n            data.features = data.features.map(function (d) {\n              d.properties.month = new Date(d.properties.time).getMonth();\n              return d;\n            });\n\n            map.addSource('earthquakes', {\n              'type': 'geojson',\n              data: data\n            });\n\n            map.addLayer({\n              'id': 'earthquake-circles',\n              'type': 'circle',\n              'source': 'earthquakes',\n              'paint': {\n                'circle-color': [\n                  'interpolate',\n                  ['linear'],\n                  ['get', 'mag'],\n                  6,\n                  '#FCA107',\n                  8,\n                  '#7F3121'\n                ],\n                'circle-opacity': 0.75,\n                'circle-radius': [\n                  'interpolate',\n                  ['linear'],\n                  ['get', 'mag'],\n                  6,\n                  20,\n                  8,\n                  40\n                ]\n              }\n            });\n\n            map.addLayer({\n              'id': 'earthquake-labels',\n              'type': 'symbol',\n              'source': 'earthquakes',\n              'layout': {\n                'text-field': [\n                  'concat',\n                  ['to-string', ['get', 'mag']],\n                  'm'\n                ],\n                'text-font': [\n                  'Open Sans Bold',\n                  'Arial Unicode MS Bold'\n                ],\n                'text-size': 13\n              },\n              'paint': {\n                'text-color': 'rgba(0,0,0,0.5)'\n              }\n            });\n\n            // Set filter to the first month of the year; 0 = January\n            filterBy(0);\n\n            map.on('click', 'earthquake-circles', function (e) {\n              let coordinates = e.features[0].geometry.coordinates.slice();\n              let link = e.features[0].properties.url;\n              let description = '<a href=\"' + link + '\" target=\"blank\">' + e.features[0].properties.title + '</a>';\n\n              // Ensure that if the map is zoomed out such that multiple\n              // copies of the feature are visible, the popup appears over the copy being pointed to.\n              while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n                coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n              }\n              new mapboxgl.Popup()\n                  .setLngLat(coordinates)\n                  .setHTML(description)\n                  .addTo(map);\n\n            });\n\n            document\n                .getElementById('slider')\n                .addEventListener('input', function (e) {\n                  let month = parseInt(e.target.value, 10);\n                  filterBy(month);\n                });\n          }\n      );\n      // popup helper with description\n      new mapboxgl.Popup({closeOnClick: false, anchor: \"center\"})\n          .setLngLat([-58.918112188335495, 60.19160056082046])\n          .setHTML('<div id=\"time-changes-helper\" class=\"popup-helper\">' +\n              'The map lets the user to take a look to the locations of significant earthquakes for each month of 2021 ' +\n              'and how those earthquakes are spread over the world. ' +\n              'Use a slider on the top right corner to choose a specific month. ' +\n              'Click on the circle to find out more information about the earthquake. <br>' +\n              'The map uses real-time data.' +\n              '</div>')\n          .addTo(map);\n\n    });\n  }\n}\n</script>\n\n<style>\n#time-changes-helper {\n font-size: 10px;\n  margin: 0;\n  padding: 0;\n}\n\n@media screen and (min-width: 1680px) {\n  #time-changes-helper {\n    font-size: 15px;\n  }\n\n  .map-overlay .map-overlay-inner {\n    font-size: 17px;\n  }\n}\n\n\n</style>\n\n<style scoped>\n.map-overlay {\n  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  position: absolute;\n  width: 25%;\n  top: 20%;\n  left: 0;\n  padding: 10px;\n}\n\n.map-overlay .map-overlay-inner {\n  background-color: #fff;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  padding: 10px;\n  margin-bottom: 5px;\n  border: orange 5px ridge;\n}\n\n.map-overlay h2 {\n  line-height: 24px;\n  display: block;\n  margin: 0 0 10px;\n}\n\n.map-overlay .legend .bar {\n  height: 10px;\n  width: 100%;\n  background: linear-gradient(to right, #fca107, #7f3121);\n}\n\n.map-overlay input {\n  background-color: transparent;\n  display: inline-block;\n  width: 100%;\n  position: relative;\n  margin: 0;\n  cursor: ew-resize;\n}\n\n.magnitude-description {\n  font-size: 10px;\n  color: darkblue;\n}\n\n.top-earthquakes-table {\n  border-collapse: collapse;\n  border: 1px solid black;\n}\n\n.top-earthquakes-table td {\n  border-top: 1px solid black;\n}\n\n.top-earthquakes-table th {\n  border-right: 1px solid black;\n}\n\n.map-overlay-bottom {\n  background-color: #fff;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  padding: 1px;\n}\n\n.map-overlay-bottom p {\n  margin: 0;\n  padding: 0;\n}\n\n#year-2020 {\n  font-weight: bold;\n  font-size: 13px;\n  text-decoration: underline;\n}\n\n@media screen and (max-width: 1050px) {\n  .map-overlay {\n    width: 30%;\n    font-size: 10px;\n  }\n}\n\n</style>","import { render } from \"./ChangesOverTime.vue?vue&type=template&id=105d6f1a&scoped=true\"\nimport script from \"./ChangesOverTime.vue?vue&type=script&lang=js\"\nexport * from \"./ChangesOverTime.vue?vue&type=script&lang=js\"\n\nimport \"./ChangesOverTime.vue?vue&type=style&index=0&id=105d6f1a&lang=css\"\nimport \"./ChangesOverTime.vue?vue&type=style&index=1&id=105d6f1a&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-105d6f1a\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChangesOverTime.vue?vue&type=style&index=0&id=105d6f1a&lang=css\"","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChangesOverTime.vue?vue&type=style&index=1&id=105d6f1a&scoped=true&lang=css\"","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('slice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n"],"sourceRoot":""}